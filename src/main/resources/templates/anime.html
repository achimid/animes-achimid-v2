<!DOCTYPE html>
<html lang="pt-br" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title th:text="|${anime.detail.title} - Animes Achimid|">Anime Page - Animes Achimid</title>

    <meta name="robots" content="max-image-preview:large">
    <meta name="googlebot" content="all">

    <meta name="description" th:content="|Encontre informaÃ§Ãµes de ${anime.detail.title} no Animes Achimid|">
    <meta name="keywords" th:content="|${anime.detail.title}, Anime, LanÃ§amento, Temporada, Fansub, GrÃ¡tis|">
    <meta property="og:title" th:content="|${anime.detail.title} - AnimesAchimid|">
    <meta property="og:description" th:content="${anime.detail.description}">
    <meta property="og:image" th:content="${anime.detail.imageUrl}">
    <meta property="og:type" content="video.tv_show">
    <meta property="og:locale" content="pt_BR" />
    <meta property="og:site_name" content="Animes Achimid" />

    <link rel="canonical" th:href="|https://animes.achimid.com.br/anime/${anime.slug}|" />

    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link rel="manifest" href="/favicon/site.webmanifest">

    <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Righteous&family=Inter:wght@400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" media="all" th:href="@{/css/common.css}" />
    <link rel="stylesheet" type="text/css" media="all" th:href="@{/css/anime.css}" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-89V9QWJ1Q4"></script>
    <script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-89V9QWJ1Q4');</script>
    <meta name="google-site-verification" content="_TNQ2lXCMgZqsSzlzOXC2PbzOrWopVSYFHmUBen1Q6c" />

    <script th:inline="javascript" type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "TVSeries",
            "name": [[${anime.detail.title}]],
            "alternateName": [[${anime.detail.titleSecondary}]],
            "image": [[${anime.detail.imageUrl}]],
            "genre": [[${anime.detail.tags}]],
            "description": [[${anime.detail.description}]],
            "aggregateRating": {
                "@type": "AggregateRating",
                "ratingValue": [[${anime.detail.rankings.rating}]],
                "bestRating": 10,
                "worstRating": 1,
                "ratingCount": 10000
            }
        }
    </script>
</head>
<body>
    <header th:replace="fragments/layout :: header"></header>

    <section class="anime-hero">
        <div class="anime-poster">
            <span class="status-badge" th:text="${anime.detail.status}">Anime Status</span>
            <img loading="lazy" th:src="${anime.detail.imageUrl}" th:alt="${anime.detail.title}">
        </div>

        <div class="anime-info-header">
            <h1 th:text="${anime.detail.title}">Anime Title</h1>
            <span class="native-title" th:text="${anime.detail.titleSecondary}">Anime Secondary Title</span>
            
            <div class="rating">
                â˜… <div th:text="${anime.detail.rankings.rating}"></div>
                <span>(Rank <span th:text="${anime.detail.rankings.rank}"></span> Global MyAnimeList)</span>
            </div>

            <div class="meta-tags">
                <span class="tag" th:each="tag : ${anime.detail.tags}" th:text="${tag}">Anime Tags</span>
            </div>

            <p style="color: #ccc; max-width: 800px; margin-bottom: 20px;" th:text="${anime.detail.description}"> Anime Description </p>
            
            <div class="action-container">
                <button class="btn btn-primary">â–º Assistir Agora</button>
                
                <button class="btn btn-secondary" id="fav-btn" onclick="toggleFavorite()">+ Minha Lista</button>

                <div class="external-icons">
                    <a href="https://www.crunchyroll.com" target="_blank" title="Assistir no Crunchyroll">
                        <img loading="lazy" src="https://www.google.com/s2/favicons?sz=64&domain=crunchyroll.com" class="ext-icon" alt="CR">
                    </a>
                    <a href="https://myanimelist.net" target="_blank" title="Ver no MyAnimeList">
                        <img loading="lazy" src="https://www.google.com/s2/favicons?sz=64&domain=myanimelist.net" class="ext-icon" alt="MAL">
                    </a>
                    <a href="https://anilist.co" target="_blank" title="Ver no AniList">
                        <img loading="lazy" src="https://www.google.com/s2/favicons?sz=64&domain=anilist.co" class="ext-icon" alt="AL">
                    </a>
                </div>
            </div>
        </div>
    </section>

    <main class="content-container">
        
        <div class="main-column">
            <h2 class="section-title">Sinopse</h2>
            <div class="description" th:utext="${anime.detail.synopsis}"></div>

            <h2 class="section-title">Lista de EpisÃ³dios</h2>
            <div class="episodes-list" id="ep-list-dynamic">
                <div class="episode-container" th:each="episode : ${anime.detail.episodes}" >
                    <article>
                        <div class="episode-item" onclick="toggleEpOptions(this)">
                            <div class="ep-info">
                                <span class="ep-num" th:text="|${episode.type}: ${episode.number}|"></span>
                                <span class="ep-title" th:text="${episode.title}"></span></div>
                            <div class="ep-play-btn">Visualizar â–¼</div>
                        </div>
                        <div class="episode-options">
                            <a class="opt-btn" th:each="option : ${episode.options}" th:href="${option.url}" th:text="${option.name}">Option Button</a>
                        </div>
                    </article>
                </div>
            </div>

            <section class="comments-section">
                <h2 class="section-title">ComentÃ¡rios</h2>
                <div class="comment-box">
                    <div class="comment-input-area">
                        <textarea placeholder="Escreva o que vocÃª achou deste episÃ³dio..."></textarea>
                        <button class="btn btn-primary" style="align-self: flex-end; padding: 10px 25px;">Publicar</button>
                    </div>

                    <div class="comment-list">
                        <div class="comment-item" th:each="comment : ${animeComment.comments}">
                            <button class="delete-comment" title="Excluir comentÃ¡rio" onclick="removeComment(this)">ðŸ—‘</button>
                            <div class="comment-avatar" th:text="${comment.avatar}">AH</div>
                            <div class="comment-content">
                                <span class="user-name" th:text="${comment.user}">User</span>
                                <p class="comment-text" th:text="${comment.content}">Content</p>
                                <span class="comment-date" th:text="${comment.date}">Date</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <aside class="sidebar">
            <div class="sidebar-card">
                <h3 style="color:var(--primary-green); margin-bottom:15px;">InformaÃ§Ãµes</h3>
                <div class="info-row" th:each="info : ${anime.detail.infoList}">
                    <span class="info-label" th:text="${info.infoName}">Status:</span>
                    <span class="info-value" th:text="${info.infoValue}">Ongoing</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Acessos:</span>
                    <span class="info-value" th:text="${anime.detail.accessCounter}">0</span>
                </div>
            </div>

            <div class="sidebar-card" style="border-color: var(--accent-orange);">
                <h3 style="color:var(--accent-orange); margin-bottom:15px;">Rankings</h3>
                <ul style="font-size: 0.9rem; color: #ccc;">
                    <li style="padding: 5px 0; border-bottom: 1px solid #333;">Score:
                        <span th:text="${anime.detail.rankings.rating}"></span>
                    </li>
                    <li style="padding: 5px 0; border-bottom: 1px solid #333;">Popularidade:
                        <span th:text="${anime.detail.rankings.popularity}"></span>
                    </li>
                    <li style="padding: 5px 0;">Rank:
                        <span th:text="${anime.detail.rankings.rank}"></span>
                    </li>
                </ul>
            </div>

            <div class="sidebar-card">
                <h3 style="color:var(--primary-green); margin-bottom:15px;">Ãšltimos LanÃ§amentos</h3>
                <div class="latest-list">
                    <a href="#" class="latest-item" th:each="release : ${releases}">
                        <span th:text="${release.animeTitle}">Anime Release Title</span>
                        <span class="ep-tag" th:text="|${release.animeNumber}|">Anime Release Number</span>
                    </a>
                </div>
            </div>

            <div class="sidebar-card" style="border-top-color: var(--accent-orange);">
                <h3 style="color:var(--accent-orange); margin-bottom:15px;">Recomendados</h3>
                <div class="recommended-list">
                    <a href="#" class="rec-item" th:each="recomendation : ${recommendations}" th:href="|/anime/${recomendation.slug}|">
                        <img class="rec-thumb" loading="lazy" th:src="${recomendation.imageUrl}" th:alt="|Poster do anime ${recomendation.title}|">
                        <div class="rec-info">
                            <span class="rec-title" th:text="${recomendation.title}">Anime Recomendation Title</span>
                            <span class="rec-meta" th:text="${recomendation.meta}">Anime Recomendation Tags</span>
                        </div>
                    </a>
                </div>
            </div>
        </aside>

    </main>

    <footer th:replace="fragments/layout :: footer"></footer>

    <script type="text/javascript" th:src="@{/js/common.js}"></script>
    <script type="text/javascript" th:src="@{/js/anime.js}"></script>
</body>
</html>